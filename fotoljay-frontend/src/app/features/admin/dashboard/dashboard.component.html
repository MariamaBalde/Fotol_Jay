<div class="admin-dashboard">
  <div class="main-content">
    <app-admin-header></app-admin-header>

  <!-- État de chargement -->
  <div class="loading-state" *ngIf="loading">
    <div class="loading-spinner"></div>
    <p>Chargement des statistiques...</p>
  </div>

  <!-- État d'erreur -->
  <div class="error-state" *ngIf="error && !loading">
    <div class="error-icon">⚠️</div>
    <h3>Erreur de chargement</h3>
    <p>{{ error }}</p>
    <button class="btn-primary" (click)="loadDashboardData()">Réessayer</button>
  </div>

  <!-- Contenu principal -->
  <div class="dashboard-content" *ngIf="!loading && !error && stats">


    <!-- Statistiques principales -->
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-icon">👥</div>
        <div class="stat-content">
          <div class="stat-number">{{ stats.totalUsers | number }}</div>
          <div class="stat-label">Utilisateurs totaux</div>
          <div class="stat-sub" *ngIf="stats.activeUsers">
            {{ stats.activeUsers | number }} actifs
          </div>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon">📦</div>
        <div class="stat-content">
          <div class="stat-number">{{ stats.totalProducts | number }}</div>
          <div class="stat-label">Produits totaux</div>
          <div class="stat-sub">
            {{ stats.approvedProducts | number }} approuvés
          </div>
        </div>
      </div>

      <div class="stat-card warning">
        <div class="stat-icon">⏳</div>
        <div class="stat-content">
          <div class="stat-number">{{ stats.pendingProducts | number }}</div>
          <div class="stat-label">En attente</div>
          <div class="stat-sub">Modération requise</div>
        </div>
      </div>

      <div class="stat-card success">
        <div class="stat-icon">✅</div>
        <div class="stat-content">
          <div class="stat-number">{{ stats.moderationRate | number:'1.1-1' }}%</div>
          <div class="stat-label">Taux modération</div>
          <div class="stat-sub">Produits approuvés</div>
        </div>
      </div>

      <div class="stat-card vip" *ngIf="stats.vipRevenue">
        <div class="stat-icon">⭐</div>
        <div class="stat-content">
          <div class="stat-number">{{ stats.vipRevenue | number }} FCFA</div>
          <div class="stat-label">Revenus VIP</div>
          <div class="stat-sub" *ngIf="stats.vipSubscribers">
            {{ stats.vipSubscribers | number }} abonnés
          </div>
        </div>
      </div>

      <div class="stat-card info" *ngIf="stats.newUsersToday">
        <div class="stat-icon">🆕</div>
        <div class="stat-content">
          <div class="stat-number">{{ stats.newUsersToday | number }}</div>
          <div class="stat-label">Nouveaux aujourd'hui</div>
          <div class="stat-sub" *ngIf="stats.newUsersThisWeek">
            {{ stats.newUsersThisWeek | number }} cette semaine
          </div>
        </div>
      </div>

      <div class="stat-card conversion" *ngIf="stats.conversionRate !== undefined">
        <div class="stat-icon">📈</div>
        <div class="stat-content">
          <div class="stat-number">{{ stats.conversionRate | number:'1.1-1' }}%</div>
          <div class="stat-label">Taux de conversion</div>
          <div class="stat-sub">Contacts établis</div>
        </div>
      </div>

      <div class="stat-card warning" *ngIf="stats.pendingReports">
        <div class="stat-icon">🚨</div>
        <div class="stat-content">
          <div class="stat-number">{{ stats.pendingReports | number }}</div>
          <div class="stat-label">Signalements</div>
          <div class="stat-sub">En attente</div>
        </div>
      </div>

      <div class="stat-card error" *ngIf="stats.recentErrors">
        <div class="stat-icon">⚠️</div>
        <div class="stat-content">
          <div class="stat-number">{{ stats.recentErrors | number }}</div>
          <div class="stat-label">Erreurs système</div>
          <div class="stat-sub">Dernières 24h</div>
        </div>
      </div>

      <div class="stat-card performance" *ngIf="stats.uptime">
        <div class="stat-icon">⚡</div>
        <div class="stat-content">
          <div class="stat-number">{{ stats.uptime | number:'1.1-1' }}%</div>
          <div class="stat-label">Disponibilité</div>
          <div class="stat-sub" *ngIf="stats.avgResponseTime">
            {{ stats.avgResponseTime | number }}ms réponse
          </div>
        </div>
      </div>
    </div>

    <!-- Actions rapides -->
    <div class="quick-actions">
      <h2>🔧 Actions Rapides</h2>
      <div class="actions-grid">
        <div class="action-card" (click)="navigateTo('/admin/moderation')">
          <div class="action-icon">🔍</div>
          <div class="action-content">
            <h3>Modération</h3>
            <p>Gérer les produits en attente</p>
          </div>
        </div>

        <div class="action-card" (click)="navigateTo('/admin/users')">
          <div class="action-icon">👥</div>
          <div class="action-content">
            <h3>Utilisateurs</h3>
            <p>Gérer les comptes utilisateur</p>
          </div>
        </div>

        <div class="action-card" (click)="navigateTo('/admin/reports')">
          <div class="action-icon">🚨</div>
          <div class="action-content">
            <h3>Signalements</h3>
            <p>Gérer les signalements utilisateurs</p>
          </div>
        </div>

        <div class="action-card" (click)="navigateTo('/admin/moderators')">
          <div class="action-icon">🛡️</div>
          <div class="action-content">
            <h3>Modérateurs</h3>
            <p>Gérer les modérateurs</p>
          </div>
        </div>

        <div class="action-card" (click)="navigateTo('/admin/vip-settings')">
          <div class="action-icon">⭐</div>
          <div class="action-content">
            <h3>VIP</h3>
            <p>Paramètres abonnement VIP</p>
          </div>
        </div>

        <div class="action-card" (click)="exportReports()">
          <div class="action-icon">📊</div>
          <div class="action-content">
            <h3>Exporter</h3>
            <p>Rapports et statistiques</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>